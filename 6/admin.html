<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Collapse</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><a href="index.html" class="title">üçï Admin Panel üçï</a></h1>
        </header>

        <div class="left">
            <strong>–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è</strong><br><br>
            –î–æ–¥–∞–π—Ç–µ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–ª—è Collapse –º–µ–Ω—é. –í–≤–µ–¥—ñ—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞ —Ç–µ–∫—Å—Ç, –ø–æ—Ç—ñ–º –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä".
        </div>

        <div class="center">
            <h2>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–ª–æ–∫—ñ–≤ (Collapse)</h2>
            
            <div id="form-container" class="admin-controls">
                </div>

            <br>
            <button class="btn btn-add" onclick="addItem()">+ –î–æ–¥–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç</button>
            <button class="btn btn-save" onclick="saveData()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</button>
            <p id="status-msg"></p>
        </div>

        <div class="right">
            <div class="first">
                <a href="index.html">üëÅ –ü–µ—Ä–µ–≥–ª—è–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É</a>
            </div>
        </div>    
            
        <footer>
            <h1>–ü–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è</h1>
        </footer>
    </div>

    <script>
        function addItem(title = '', content = '') {
            const container = document.getElementById('form-container');
            const div = document.createElement('div');
            div.className = 'input-group';
            div.innerHTML = `
                <input type="text" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫—É" class="item-title" value="${title}">
                <textarea placeholder="–í–º—ñ—Å—Ç –±–ª–æ–∫—É" class="item-content">${content}</textarea>
                <button class="btn btn-del" onclick="this.parentElement.remove()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
            `;
            container.appendChild(div);
        }

        async function saveData() {
            const titles = document.querySelectorAll('.item-title');
            const contents = document.querySelectorAll('.item-content');
            const data = [];

            titles.forEach((input, index) => {
                if(input.value.trim() !== "") {
                    data.push({
                        title: input.value,
                        content: contents[index].value
                    });
                }
            });

            try {
                const response = await fetch('api.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await response.json();
                
                const status = document.getElementById('status-msg');
                if(result.status === 'success') {
                    status.style.color = 'green';
                    status.innerText = '–î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!';
                } else {
                    status.style.color = 'red';
                    status.innerText = '–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è.';
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        addItem();
    </script>
</body>
</html>